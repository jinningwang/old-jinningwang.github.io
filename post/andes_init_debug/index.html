<!DOCTYPE html>
<!-- This site was created with Wowchemy. https://www.wowchemy.com -->
<!-- Last Published: November 23, 2022 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.7.0 for Hugo" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.16f785cdb553c8c4431db6775122af35.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css" integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.e5d7adca760216d3b7e28ea434e81f6f.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  


























  
  
  






  <meta name="author" content="Jinning Wang" />





  

<meta name="description" content="When revising ANDES case file, the user will run into power flow divergence and TDS initialization error. In this blog, we will show how to recognize and fix these errors." />



<link rel="alternate" hreflang="en-us" href="https://example.com/post/andes_init_debug/" />
<link rel="canonical" href="https://example.com/post/andes_init_debug/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hu34517862f4a1ff29f087ce92eb66ea20_25692_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hu34517862f4a1ff29f087ce92eb66ea20_25692_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#1565c0" />










  
  






<meta property="twitter:card" content="summary" />

  <meta property="twitter:site" content="@wowchemy" />
  <meta property="twitter:creator" content="@wowchemy" />
<meta property="twitter:image" content="https://example.com/media/icon_hu34517862f4a1ff29f087ce92eb66ea20_25692_512x512_fill_lanczos_center_3.png" />
<meta property="og:site_name" content="Jinning Wang" />
<meta property="og:url" content="https://example.com/post/andes_init_debug/" />
<meta property="og:title" content="ANDES Case File Tunning | Jinning Wang" />
<meta property="og:description" content="When revising ANDES case file, the user will run into power flow divergence and TDS initialization error. In this blog, we will show how to recognize and fix these errors." /><meta property="og:image" content="https://example.com/media/icon_hu34517862f4a1ff29f087ce92eb66ea20_25692_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2022-11-23T00:00:00&#43;00:00"
    />
  
  
    <meta property="article:modified_time" content="2022-11-23T00:00:00&#43;00:00">
  






    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://example.com/post/andes_init_debug/"
  },
  "headline": "ANDES Case File Tunning",
  
  "datePublished": "2022-11-23T00:00:00Z",
  "dateModified": "2022-11-23T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Jinning Wang"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Jinning Wang",
    "logo": {
      "@type": "ImageObject",
      "url": "https://example.com/media/icon_hu34517862f4a1ff29f087ce92eb66ea20_25692_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "When revising ANDES case file, the user will run into power flow divergence and TDS initialization error. In this blog, we will show how to recognize and fix these errors."
}
</script>

  

  




  
  
  

  
  

  


  
  <title>ANDES Case File Tunning | Jinning Wang</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="5592c782b494a6640e78a06288e5bc12" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.ec9d49ca50e4b80bdb08f0417a28ed84.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Jinning Wang</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Jinning Wang</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>Home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#featured"><span>Selected Works</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#projects"><span>Projects</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#publications"><span>Publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#posts"><span>Blogs</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#gallery"><span>Gallery</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#experience"><span>Experience</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#contact"><span>Contact</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item dropdown theme-dropdown">
          <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
            <i class="fas fa-moon" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item js-set-theme-light">
              <span>Light</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-dark">
              <span>Dark</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-auto">
              <span>Automatic</span>
            </a>
          </div>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>ANDES Case File Tunning</h1>

  
  <p class="page-subtitle">How to Fix Power Flow Divergence and TDS Initialization Error</p>
  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  <span class="author-highlighted">
      Jinning Wang</span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Nov 23, 2022
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    5 min read
  </span>
  

  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/original/">Original</a></span>
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      <p>When revising ANDES case file, the user will run into power flow divergence and TDS initialization error.</p>
<p>As discussed in <a href="https://github.com/cuihantao/andes/discussions/386" target="_blank" rel="noopener">ANDES Discussion #386</a>, in this blog, we will show how to recognize and fix these errors.<code>&lt;!--</code></p>
<h1 id="andes-case-file-tunning">ANDES Case File Tunning</h1>
<p>-- Response to <a href="https://github.com/cuihantao/andes/discussions/386" target="_blank" rel="noopener">ANDES Discussion #386</a>.</p>
<h2 id="packages-version">Packages version</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">andes</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">andes</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>1.8.3.post8+ge180c540
1.22.3
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">andes</span><span class="o">.</span><span class="n">config_logger</span><span class="p">(</span><span class="n">stream_level</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="load-case">Load case</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">case0</span> <span class="o">=</span> <span class="n">andes</span><span class="o">.</span><span class="n">get_case</span><span class="p">(</span><span class="s1">&#39;ieee14/ieee14_full.xlsx&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">case_path</span> <span class="o">=</span> <span class="s1">&#39;/Users/jinningwang/Documents/work/andes/icebar/discussion386/&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">case1</span> <span class="o">=</span> <span class="n">case_path</span> <span class="o">+</span> <span class="s1">&#39;ieee14_1.00_Line_12_0.80_1.00_1.30.xlsx&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">case2</span> <span class="o">=</span> <span class="n">case_path</span> <span class="o">+</span> <span class="s1">&#39;ieee14_1.00_Line_12_0.90_1.00_1.30.xlsx&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">case3</span> <span class="o">=</span> <span class="n">case_path</span> <span class="o">+</span> <span class="s1">&#39;ieee14_1.00_Line_12_0.95_1.00_1.30.xlsx&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss0</span> <span class="o">=</span> <span class="n">andes</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">case0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">default_config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">no_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ss1</span> <span class="o">=</span> <span class="n">andes</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">case1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">default_config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">no_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ss2</span> <span class="o">=</span> <span class="n">andes</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">case2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">default_config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">no_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ss3</span> <span class="o">=</span> <span class="n">andes</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">case3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">default_config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">no_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>Generating code for 1 models on 8 processes.
Generating code for 1 models on 8 processes.
Generating code for 1 models on 8 processes.
Generating code for 1 models on 8 processes.
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">andes</span><span class="o">.</span><span class="n">config_logger</span><span class="p">(</span><span class="n">stream_level</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span></span></code></pre></div><p>Case0 is the base case in ANDES source repository.</p>
<p>Case1-3 is the revised case.</p>
<p>Case1 runs well, Case2 TDS initialization failed, and Case3 power flow failed.</p>
<p>These errors are common when revising the case and are usually caused by inappropriate parameters.</p>
<p>In below, we will show how to recognize the reasons and fix the case.</p>
<h2 id="case0">Case0</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss0</span><span class="o">.</span><span class="n">PFlow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>-&gt; System connectivity check results:
  No islanded bus detected.
  System is interconnected.
  Each island has a slack bus correctly defined and enabled.

-&gt; Power flow calculation
           Numba: Off
   Sparse solver: KLU
 Solution method: NR method
Power flow initialized in 0.0111 seconds.
0: |F(x)| = 0.5605182134
1: |F(x)| = 0.006202200332
2: |F(x)| = 5.819382825e-06
3: |F(x)| = 6.957087684e-12
Converged in 4 iterations in 0.0178 seconds.

True
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss0i</span> <span class="o">=</span> <span class="n">ss0</span><span class="o">.</span><span class="n">TDS</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>Initialization for dynamics completed in 0.0767 seconds.
Initialization was successful.
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss0</span><span class="o">.</span><span class="n">TDS</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>-&gt; Time Domain Simulation Summary:
Sparse Solver: KLU
Simulation time: 0.0-20.0 s.
Fixed step size: h=33.33 ms. Shrink if not converged.

0%|          | 0/100 [00:00&lt;?, ?%/s]

Simulation to t=20.00 sec completed in 0.7133 seconds.

True
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss0</span><span class="o">.</span><span class="n">TDS</span><span class="o">.</span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ss0</span><span class="o">.</span><span class="n">GENROU</span><span class="o">.</span><span class="n">omega</span><span class="p">)</span>
</span></span></code></pre></div><p>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="./index_14_0.png" alt="png" loading="lazy" data-zoomable /></div>
  </div></figure>
</p>
<pre><code>(&lt;Figure size 640x480 with 1 Axes&gt;, &lt;AxesSubplot:xlabel='Time [s]'&gt;)
</code></pre>
<p>Base case is okay.</p>
<h2 id="case1">Case1</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss1</span><span class="o">.</span><span class="n">PFlow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>-&gt; System connectivity check results:
  No islanded bus detected.
  System is interconnected.
  Each island has a slack bus correctly defined and enabled.

-&gt; Power flow calculation
           Numba: Off
   Sparse solver: KLU
 Solution method: NR method
Power flow initialized in 0.0060 seconds.
0: |F(x)| = 8.6568834
1: |F(x)| = 7.007197233
2: |F(x)| = 1.365637093
3: |F(x)| = 0.1659350293
4: |F(x)| = 0.003034072009
5: |F(x)| = 9.897107155e-07
Converged in 6 iterations in 0.0069 seconds.

True
</code></pre>
<p>Power flow solved.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss1i</span> <span class="o">=</span> <span class="n">ss1</span><span class="o">.</span><span class="n">TDS</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>Initialization for dynamics completed in 0.0442 seconds.
Initialization was successful.
</code></pre>
<p>TDS initialized.</p>
<h2 id="case2">Case2</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss2</span><span class="o">.</span><span class="n">PFlow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>-&gt; System connectivity check results:
  No islanded bus detected.
  System is interconnected.
  Each island has a slack bus correctly defined and enabled.

-&gt; Power flow calculation
           Numba: Off
   Sparse solver: KLU
 Solution method: NR method
Power flow initialized in 0.0081 seconds.
0: |F(x)| = 15.44601457
1: |F(x)| = 87.13552781
2: |F(x)| = 51.0391057
3: |F(x)| = 14.27050865
4: |F(x)| = 3.188620159
5: |F(x)| = 0.5200860572
6: |F(x)| = 0.1319546069
7: |F(x)| = 0.02833026213
8: |F(x)| = 0.007088256276
9: |F(x)| = 0.001772020979
10: |F(x)| = 0.0004430050393
11: |F(x)| = 0.0001107512598
12: |F(x)| = 2.768781496e-05
13: |F(x)| = 6.92195374e-06
14: |F(x)| = 1.730488435e-06
15: |F(x)| = 4.326221087e-07
Converged in 16 iterations in 0.0245 seconds.

True
</code></pre>
<p>Power flow solved.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss2i</span> <span class="o">=</span> <span class="n">ss2</span><span class="o">.</span><span class="n">TDS</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>GENROU (vf range) out of typical upper limit.

idx    | values | limit
----------+--------+------
 GENROU_1 | 7.000  | 5
GENROU_2 | 11.206 | 5
GENROU_3 | 5.413  | 5
GENROU_4 | 36.426 | 5
GENROU_5 | 12.359 | 5

ESST3A.VG_lim: adjusted limit`&lt;VGMAX&gt;`

Idx    | Input  | Old Limit
----------+--------+----------
 ESST3A_2 | 7.000  | 3.860
ESST3A_3 | 5.413  | 3.860
ESST3A_4 | 36.426 | 3.860
ESST3A_5 | 12.359 | 3.860

ESST3A.VB_lim: adjusted limit`&lt;VBMAX&gt;`

Idx    | Input | Old Limit
----------+-------+----------
 ESST3A_4 | 7.352 | 5.480

PQ.vcmp out of limits`&lt;vmin&gt;`

idx   | Flag | Input Value | Limit
-------+------+-------------+------
 PQ_3  | zl   | 0.772       | 0.800
 PQ_4  | zl   | 0.782       | 0.800
 PQ_6  | zl   | -0.000      | 0.800
 PQ_7  | zl   | -0.000      | 0.800
 PQ_8  | zl   | 0.000       | 0.800
 PQ_11 | zl   | 0.369       | 0.800

ESST3A.HLI out of limits`&lt;VIMAX&gt;`

idx    | Flag | Input Value | Limit
----------+------+-------------+------
 ESST3A_2 | zu   | 0.360       | 0.200
 ESST3A_3 | zu   | 0.278       | 0.200
 ESST3A_4 | zu   | 1.852       | 0.200
 ESST3A_5 | zu   | 0.633       | 0.200

Suspect initialization issue! Simulation may crash!

Name      | Var. Value | Eqn. Mismatch
--------------+------------+--------------
 LL_y TGOV1 1 | 3.454      | -2.404
vil ESST3A 2 | 0.360      | -0.160
vil ESST3A 3 | 0.278      | -0.078
vil ESST3A 4 | 1.852      | -1.652
vil ESST3A 5 | 0.633      | -0.433

Initialization for dynamics completed in 0.0517 seconds.
Initialization failed!!
If you are developing a new model, check the initialization with
   andes -v 10 run -r tds --init /Users/jinningwang/Documents/work/andes/icebar/discussion386/ieee14_1.00_Line_12_0.90_1.00_1.30.xlsx
Otherwise, check the variables that are initialized out of limits.
</code></pre>
<p>TDS initialization failed.</p>
<p>The Eqn. Mismatch items are associated with <code>LL_y TGOV1</code> and <code>vil ESST3A</code>.
In the Model Reference or the model source code, it can be noticed that:</p>
<ol>
<li><code>LL_y TGOV1</code> is associated with function <code>LAG</code>, and <code>LAG</code> is limited by <code>VMIN</code> and <code>VMAX</code>.</li>
<li><code>vil ESST3A</code> is associated with <code>HIL</code>, and <code>HIL</code> is limited by <code>VIMIN</code> and <code>VIMAX</code>.</li>
</ol>
<p>Usually, the failed initialization is caused by the inapproriate limiter range, and it can be addressed by adjusting the range.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">col_TGOV1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;syn&#39;</span><span class="p">,</span> <span class="s1">&#39;VMAX&#39;</span><span class="p">,</span> <span class="s1">&#39;VMIN&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">ss2</span><span class="o">.</span><span class="n">TGOV1</span><span class="o">.</span><span class="n">as_df</span><span class="p">()[</span><span class="n">col_TGOV1</span><span class="p">]</span>
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}`&lt;/style&gt;`
</code></pre>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>idx</th>
      <th>u</th>
      <th>name</th>
      <th>syn</th>
      <th>VMAX</th>
      <th>VMIN</th>
    </tr>
    <tr>
      <th>uid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TGOV1_1</td>
      <td>1.0</td>
      <td>TGOV1_1</td>
      <td>GENROU_1</td>
      <td>1.05</td>
      <td>0.3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TGOV1_2</td>
      <td>1.0</td>
      <td>TGOV1_2</td>
      <td>GENROU_2</td>
      <td>1.20</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>TGOV1_3</td>
      <td>1.0</td>
      <td>TGOV1_3</td>
      <td>GENROU_3</td>
      <td>1.20</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TGOV1_4</td>
      <td>1.0</td>
      <td>TGOV1_4</td>
      <td>GENROU_4</td>
      <td>1.05</td>
      <td>0.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TGOV1_5</td>
      <td>1.0</td>
      <td>TGOV1_5</td>
      <td>GENROU_5</td>
      <td>1.05</td>
      <td>0.3</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">col_ESST3A</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;syn&#39;</span><span class="p">,</span> <span class="s1">&#39;VIMAX&#39;</span><span class="p">,</span> <span class="s1">&#39;VIMIN&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">ss2</span><span class="o">.</span><span class="n">ESST3A</span><span class="o">.</span><span class="n">as_df</span><span class="p">()[</span><span class="n">col_ESST3A</span><span class="p">]</span>
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}`&lt;/style&gt;`
</code></pre>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>idx</th>
      <th>u</th>
      <th>name</th>
      <th>syn</th>
      <th>VIMAX</th>
      <th>VIMIN</th>
    </tr>
    <tr>
      <th>uid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ESST3A_2</td>
      <td>1.0</td>
      <td>ESST3A_2</td>
      <td>GENROU_1</td>
      <td>0.2</td>
      <td>-0.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ESST3A_3</td>
      <td>1.0</td>
      <td>ESST3A_3</td>
      <td>GENROU_3</td>
      <td>0.2</td>
      <td>-0.2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ESST3A_4</td>
      <td>1.0</td>
      <td>ESST3A_4</td>
      <td>GENROU_4</td>
      <td>0.2</td>
      <td>-0.2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ESST3A_5</td>
      <td>1.0</td>
      <td>ESST3A_5</td>
      <td>GENROU_5</td>
      <td>0.2</td>
      <td>-0.2</td>
    </tr>
  </tbody>
</table>
</div>
<p>We can try to enlarge <code>VMAX</code> and <code>VMIN</code> of device <code>TGOV1_1</code>.</p>
<p>However, it should be noted that since <code>ss2</code> has been initialziaed, we need to re-instantiate a new one.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc2</span> <span class="o">=</span> <span class="n">andes</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">case2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">default_config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">no_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>Working directory: &quot;/Users/jinningwang/Documents/work/jwio/content/post/andes_init_debug&quot;
&gt; Reloaded generated Python code of module &quot;pycode&quot;.
Generated code for`&lt;PQ&gt;` is stale.
Numerical code generation (rapid incremental mode) started...

Generating code for 1 models on 8 processes.

Saved generated pycode to &quot;/Users/jinningwang/.andes/pycode&quot;
&gt; Reloaded generated Python code of module &quot;pycode&quot;.
Generated numerical code for 1 models in 0.2471 seconds.
Parsing input file &quot;/Users/jinningwang/Documents/work/andes/icebar/discussion386/ieee14_1.00_Line_12_0.90_1.00_1.30.xlsx&quot;...
Input file parsed in 0.0625 seconds.
System internal structure set up in 0.0369 seconds.
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc2</span><span class="o">.</span><span class="n">TGOV1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="s1">&#39;TGOV1_1&#39;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;VMAX&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">sc2</span><span class="o">.</span><span class="n">TGOV1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="s1">&#39;TGOV1_1&#39;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;VMIN&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>True
</code></pre>
<p>Similarly, we can try to enlarge <code>VIMAX</code> and <code>VIMIN</code> of device <code>ESST3A_2</code> - <code>ESST3A_5</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc2</span><span class="o">.</span><span class="n">ESST3A</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ESST3A_2&#39;</span><span class="p">,</span> <span class="s1">&#39;ESST3A_3&#39;</span><span class="p">,</span> <span class="s1">&#39;ESST3A_4&#39;</span><span class="p">,</span> <span class="s1">&#39;ESST3A_5&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="n">src</span><span class="o">=</span><span class="s1">&#39;VIMAX&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">               <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">sc2</span><span class="o">.</span><span class="n">ESST3A</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ESST3A_2&#39;</span><span class="p">,</span> <span class="s1">&#39;ESST3A_3&#39;</span><span class="p">,</span> <span class="s1">&#39;ESST3A_4&#39;</span><span class="p">,</span> <span class="s1">&#39;ESST3A_5&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="n">src</span><span class="o">=</span><span class="s1">&#39;VIMIN&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">               <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">])</span>
</span></span></code></pre></div><pre><code>True
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc2</span><span class="o">.</span><span class="n">PFlow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>-&gt; System connectivity check results:
  No islanded bus detected.
  System is interconnected.
  Each island has a slack bus correctly defined and enabled.

-&gt; Power flow calculation
           Numba: Off
   Sparse solver: KLU
 Solution method: NR method
Power flow initialized in 0.0059 seconds.
0: |F(x)| = 15.44601457
1: |F(x)| = 87.13552781
2: |F(x)| = 51.0391057
3: |F(x)| = 14.27050865
4: |F(x)| = 3.188620159
5: |F(x)| = 0.5200860572
6: |F(x)| = 0.1319546069
7: |F(x)| = 0.02833026213
8: |F(x)| = 0.007088256276
9: |F(x)| = 0.001772020979
10: |F(x)| = 0.0004430050393
11: |F(x)| = 0.0001107512598
12: |F(x)| = 2.768781496e-05
13: |F(x)| = 6.92195374e-06
14: |F(x)| = 1.730488435e-06
15: |F(x)| = 4.326221087e-07
Converged in 16 iterations in 0.0223 seconds.

True
</code></pre>
<p>Now, Case2 can be initialized successfully.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc2i</span> <span class="o">=</span> <span class="n">sc2</span><span class="o">.</span><span class="n">TDS</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>GENROU (vf range) out of typical upper limit.

idx    | values | limit
----------+--------+------
 GENROU_1 | 7.000  | 5
GENROU_2 | 11.206 | 5
GENROU_3 | 5.413  | 5
GENROU_4 | 36.426 | 5
GENROU_5 | 12.359 | 5

ESST3A.VG_lim: adjusted limit`&lt;VGMAX&gt;`

Idx    | Input  | Old Limit
----------+--------+----------
 ESST3A_2 | 7.000  | 3.860
ESST3A_3 | 5.413  | 3.860
ESST3A_4 | 36.426 | 3.860
ESST3A_5 | 12.359 | 3.860

ESST3A.VB_lim: adjusted limit`&lt;VBMAX&gt;`

Idx    | Input | Old Limit
----------+-------+----------
 ESST3A_4 | 7.352 | 5.480

PQ.vcmp out of limits`&lt;vmin&gt;`

idx   | Flag | Input Value | Limit
-------+------+-------------+------
 PQ_3  | zl   | 0.772       | 0.800
 PQ_4  | zl   | 0.782       | 0.800
 PQ_6  | zl   | -0.000      | 0.800
 PQ_7  | zl   | -0.000      | 0.800
 PQ_8  | zl   | 0.000       | 0.800
 PQ_11 | zl   | 0.369       | 0.800

Initialization for dynamics completed in 0.0468 seconds.
Initialization was successful.
</code></pre>
<h2 id="case3">Case3</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ss3</span><span class="o">.</span><span class="n">PFlow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>-&gt; System connectivity check results:
  No islanded bus detected.
  System is interconnected.
  Each island has a slack bus correctly defined and enabled.

-&gt; Power flow calculation
           Numba: Off
   Sparse solver: KLU
 Solution method: NR method
Power flow initialized in 0.0073 seconds.
0: |F(x)| = 29.31915012
1: |F(x)| = 740.0002552
2: |F(x)| = 184.73335
3: |F(x)| = 45.4526586
4: |F(x)| = 12.50794975
5: |F(x)| = 15.21453025
6: |F(x)| = 10.05942972
7: |F(x)| = 13.61984299
8: |F(x)| = 35.59466317
9: |F(x)| = 8.482561041
10: |F(x)| = 10.18377093
11: |F(x)| = 3.30210519
12: |F(x)| = 29.83519301
13: |F(x)| = 37.76487849
14: |F(x)| = 12.23775322
15: |F(x)| = 3.856617645
16: |F(x)| = 2901.501366
17: |F(x)| = 729.7337025
18: |F(x)| = 180.6417168
19: |F(x)| = 2184.801181
20: |F(x)| = 547.8476025
21: |F(x)| = 1230.613562
22: |F(x)| = 64.12087458
23: |F(x)| = 13.02606755
24: |F(x)| = 46.98123
25: |F(x)| = 94.82327295
26: |F(x)| = 29.99344683
Power flow failed after 27 iterations for &quot;/Users/jinningwang/Documents/work/andes/icebar/discussion386/ieee14_1.00_Line_12_0.95_1.00_1.30.xlsx&quot;.

False
</code></pre>
<p>Power flow failed.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc3</span> <span class="o">=</span> <span class="n">andes</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">case3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">default_config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                 <span class="n">no_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>Working directory: &quot;/Users/jinningwang/Documents/work/jwio/content/post/andes_init_debug&quot;
&gt; Reloaded generated Python code of module &quot;pycode&quot;.
Generated code for`&lt;PQ&gt;` is stale.
Numerical code generation (rapid incremental mode) started...

Generating code for 1 models on 8 processes.

Saved generated pycode to &quot;/Users/jinningwang/.andes/pycode&quot;
&gt; Reloaded generated Python code of module &quot;pycode&quot;.
Generated numerical code for 1 models in 0.1908 seconds.
Parsing input file &quot;/Users/jinningwang/Documents/work/andes/icebar/discussion386/ieee14_1.00_Line_12_0.95_1.00_1.30.xlsx&quot;...
Input file parsed in 0.0673 seconds.
System internal structure set up in 0.0362 seconds.
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">col_bus</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Vn&#39;</span><span class="p">,</span> <span class="s1">&#39;vmax&#39;</span><span class="p">,</span> <span class="s1">&#39;vmin&#39;</span><span class="p">,</span> <span class="s1">&#39;v0&#39;</span><span class="p">,</span> <span class="s1">&#39;a0&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">ss0</span><span class="o">.</span><span class="n">Bus</span><span class="o">.</span><span class="n">as_df</span><span class="p">()[</span><span class="n">col_bus</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}`&lt;/style&gt;`
</code></pre>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>idx</th>
      <th>u</th>
      <th>name</th>
      <th>Vn</th>
      <th>vmax</th>
      <th>vmin</th>
      <th>v0</th>
      <th>a0</th>
    </tr>
    <tr>
      <th>uid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>1.0</td>
      <td>BUS12</td>
      <td>138.0</td>
      <td>1.1</td>
      <td>0.9</td>
      <td>0.98639</td>
      <td>-0.128934</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>1.0</td>
      <td>BUS13</td>
      <td>138.0</td>
      <td>1.1</td>
      <td>0.9</td>
      <td>0.98403</td>
      <td>-0.133786</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>1.0</td>
      <td>BUS14</td>
      <td>138.0</td>
      <td>1.1</td>
      <td>0.9</td>
      <td>0.99063</td>
      <td>-0.166916</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc3</span><span class="o">.</span><span class="n">Bus</span><span class="o">.</span><span class="n">as_df</span><span class="p">()[</span><span class="n">col_bus</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>
</span></span></code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}`&lt;/style&gt;`
</code></pre>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>idx</th>
      <th>u</th>
      <th>name</th>
      <th>Vn</th>
      <th>vmax</th>
      <th>vmin</th>
      <th>v0</th>
      <th>a0</th>
    </tr>
    <tr>
      <th>uid</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>1.0</td>
      <td>BUS13</td>
      <td>138.0</td>
      <td>1.1</td>
      <td>0.9</td>
      <td>0.98403</td>
      <td>-0.133786</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>1.0</td>
      <td>BUS14</td>
      <td>138.0</td>
      <td>1.1</td>
      <td>0.9</td>
      <td>0.99063</td>
      <td>-0.166916</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>1.0</td>
      <td>BUS15</td>
      <td>138.0</td>
      <td>1.1</td>
      <td>0.9</td>
      <td>1.00000</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div>
<p>Compared to the original Case0, Case3 inserts a new device <code>BUS15</code> with <code>v0</code> and <code>a0</code> being set as default values.</p>
<p>This might be the reason why the power flow failed.</p>
<p>We can try to adjust those values to fix the power flow.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc3</span><span class="o">.</span><span class="n">Bus</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;v0&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.99</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">sc3</span><span class="o">.</span><span class="n">Bus</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s1">&#39;a0&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=-</span><span class="mf">0.1</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>True
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc3</span><span class="o">.</span><span class="n">PFlow</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>-&gt; System connectivity check results:
  No islanded bus detected.
  System is interconnected.
  Each island has a slack bus correctly defined and enabled.

-&gt; Power flow calculation
           Numba: Off
   Sparse solver: KLU
 Solution method: NR method
Power flow initialized in 0.0073 seconds.
0: |F(x)| = 6.171679059
1: |F(x)| = 0.8778049877
2: |F(x)| = 0.05516065719
3: |F(x)| = 0.0001907369157
4: |F(x)| = 2.026405849e-09
Converged in 5 iterations in 0.0084 seconds.

True
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">sc3i</span> <span class="o">=</span> <span class="n">sc3</span><span class="o">.</span><span class="n">TDS</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>Initialization for dynamics completed in 0.0554 seconds.
Initialization was successful.
</code></pre>
<p>Now the power flow can be solved and the TDS can be initialized successfully</p>
<h2 id="what-is-andes">What is ANDES?</h2>
<p><a href="https://docs.andes.app/en/stable/" target="_blank" rel="noopener">ANDES</a> is an open-source Python library for power system modeling and simulation developed by <a href="https://cui.eecps.com/" target="_blank" rel="noopener">Dr. Hantao Cui</a>. ANDES allows users to develop new models by their own will, which can be easily done by translating block diagrams into models.</p>
<p>The philosophy of ANDES is introduced in:</p>
<blockquote>
<p>H. Cui, F. Li and K. Tomsovic, &ldquo;Hybrid Symbolic-Numeric Framework for Power System Modeling and Analysis,&rdquo; in  <em>IEEE Transactions on Power Systems</em> , vol. 36, no. 2, pp. 1373-1384, March 2021, doi: 10.1109/TPWRS.2020.3017019.</p>
</blockquote>
<p>ANDES is currently under <em><strong>ACTIVE</strong></em> development and maintenance by Dr. Hantao Cui.</p>
<h2 id="how-to-develop-new-model-with-andes">How to develop new model with ANDES?</h2>
<p>Two examples for development new models are available at <a href="https://docs.andes.app/en/stable/modeling/index.html" target="_blank" rel="noopener">Development</a>.</p>
<p>Before developing a new model, it is recommended to go through the <a href="https://docs.andes.app/en/stable/modelref.html" target="_blank" rel="noopener">Model reference</a> and check out the existing groups and their functions. Then the following steps can be followed:</p>
<ol>
<li>Make sure you have installed ANDES in development mode.</li>
<li>Check existing models that are similar to your model, and then draft the diagram of your model. Some standard model references are available on ESIG, Neplan, PowerWorld, and PSSE Model Library.</li>
<li>When implementing the model, similar function pieces from existing models can help to reduce manual efforts.</li>
<li>Build your model and finalize it.</li>
<li>Re-generate the pycode by <code>andes prep</code>. Sometimes there occur multi-functionalities, where you may need <code>andes prep -f</code> to re-generate all model codes.</li>
<li>Create a test case file that includes your model, where the IEEE 14-bus system and Kundur system can be used.</li>
<li>Load the test case, and run the <code>ss.TDS.init()</code> to see if the initialization is successful. If initialization runs into an error, you may need to tune the model initialization equations (<code>v_str</code> defined in the model). Remember to run <code>andes prep</code> and restart the kernel (for Jupyter Notebook users) every time you make a change to the model code.</li>
<li>After finishing the model development, it is encouraged to check the code style (can be done by package flake8) and open a PR to contribute it into the <a href="https://github.com/cuihantao/andes" target="_blank" rel="noopener">ADNES repo</a>.</li>
</ol>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/power-system-modeling/">Power System Modeling</a>
  
  <a class="badge badge-light" href="/tag/andes/">ANDES</a>
  
  <a class="badge badge-light" href="/tag/ltb/">LTB</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fexample.com%2Fpost%2Fandes_init_debug%2F&amp;text=ANDES&#43;Case&#43;File&#43;Tunning" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fexample.com%2Fpost%2Fandes_init_debug%2F&amp;t=ANDES&#43;Case&#43;File&#43;Tunning" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
        
      
      <li>
        <a href="mailto:?subject=ANDES%20Case%20File%20Tunning&amp;body=https%3A%2F%2Fexample.com%2Fpost%2Fandes_init_debug%2F" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fexample.com%2Fpost%2Fandes_init_debug%2F&amp;title=ANDES&#43;Case&#43;File&#43;Tunning" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="whatsapp://send?text=ANDES&#43;Case&#43;File&#43;Tunning%20https%3A%2F%2Fexample.com%2Fpost%2Fandes_init_debug%2F" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Fexample.com%2Fpost%2Fandes_init_debug%2F&amp;title=ANDES&#43;Case&#43;File&#43;Tunning" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://example.com/"><img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hua68bde84c1c025c0ef0ddc515f7d74e2_68243_270x270_fill_q75_lanczos_center.jpg" alt="Jinning Wang"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://example.com/">Jinning Wang</a></h5>
      <h6 class="card-subtitle">PhD student</h6>
      <p class="card-text">Jinning Wang is currently pursuing a Ph.D. degree in electrical engineering at the University of Tennessee, Knoxville, TN, USA.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=Wr7nQZAAAAAJ&amp;hl=en&amp;oi=ao" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.researchgate.net/profile/Jinning_Wang3" target="_blank" rel="noopener">
        <i class="fab fa-researchgate"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/jinningwang" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/jinning-wang-846490199/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://orcid.org/0000-0001-9302-3364" target="_blank" rel="noopener">
        <i class="fab fa-orcid"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  
















  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a>  the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js"></script>




  

  
  

  













  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":true}</script>



  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>









  
  


<script src="/en/js/wowchemy.min.e8ee06ba8371980ffde659871dd593b0.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>


















</body>
</html>
